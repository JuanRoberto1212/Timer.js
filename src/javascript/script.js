const timerEl=document.getElementById("timer"),marksList=document.getElementById("marks-list");let resetTimeout,intervalId=0,timer=0,marks=JSON.parse(localStorage.getItem("marks"))||[],resetClickCount=0;const formatTime=a=>{const b=Math.floor(a/36e4),c=Math.floor(a%36e4/6e3),d=Math.floor(a%6e3/100),e=(a%100).toString().padStart(2,"0");return`${b.toString().padStart(2,"0")}:${c.toString().padStart(2,"0")}:${d.toString().padStart(2,"0")}:${e}`},setTimer=a=>{timerEl.innerText=formatTime(a)},addMarkToList=(a,b)=>{const c=document.createElement("p");c.textContent=`Marca ${a}: ${formatTime(b)}`,marksList.appendChild(c)},loadMarks=()=>{marks.forEach((a,b)=>{addMarkToList(b+1,a)})},saveMarks=()=>{localStorage.setItem("marks",JSON.stringify(marks))},markTime=()=>{marks.push(timer),10<marks.length&&(marksList.innerHTML="",marks=[]),addMarkToList(marks.length,timer),saveMarks()},resetTimer=()=>{resetClickCount++,clearTimeout(resetTimeout),resetTimeout=setTimeout(()=>{resetClickCount=0},300),2===resetClickCount&&(marksList.innerHTML="",marks=[],saveMarks()),clearInterval(intervalId),timer=0,setTimer(timer)},startTimer=()=>{intervalId=setInterval(()=>{timer+=1,setTimer(timer)},10)},pauseTimer=()=>{clearInterval(intervalId)},toggleTimer=()=>{const a=document.getElementById("power"),b=a.getAttribute("action");"start"===b||"continue"===b?(startTimer(),a.setAttribute("action","pause"),a.innerHTML="<i class=\"fa-solid fa-pause\"></i>"):"pause"===b&&(pauseTimer(),a.setAttribute("action","continue"),a.innerHTML="<i class=\"fa-solid fa-play\"></i>")};timerEl.addEventListener("click",toggleTimer),document.getElementById("power").addEventListener("click",toggleTimer),document.getElementById("mark").addEventListener("click",markTime),document.getElementById("reset").addEventListener("click",resetTimer),document.addEventListener("keydown",a=>{switch(a.key){case" ":toggleTimer();break;case"r":resetTimer();break;case"m":markTime();break;default:}}),loadMarks();